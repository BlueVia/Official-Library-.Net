<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bluevia: OAUTH API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bluevia&#160;<span id="projectnumber">1.5</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('blv_api_oauth.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>OAUTH API </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="section_oauth"></a>
OAUTH:</h2>
<p><a class="anchor" id="section_oauth"></a></p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth" target="_blank">Bluevia's Oauth API Guide</a></p>
<h2><a class="anchor" id="objects_oauth"></a>
Objects:</h2>
<p><a class="anchor" id="objects_oauth"></a> Create OAuth Token pair: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Schemas.OAuthToken OAuthToken = <span class="keyword">new</span> Bluevia.Core.Schemas.OAuthToken(<span class="stringliteral">&quot;accessToken&quot;</span>,<span class="stringliteral">&quot;accessTokenSecret&quot;</span>);
</pre></div><h2><a class="anchor" id="methods_oauth"></a>
Methods:</h2>
<p><a class="anchor" id="methods_oauth"></a> Requesting valid tokens for the application:</p>
<p><b>First Step:</b> </p>
<div class="fragment"><pre class="fragment">        var getRequest = request
        .OAuth.RequestToken.Get(callbackUrl: <span class="stringliteral">&quot;callbackUrl&quot;</span>*optional);
</pre></div><p>Note that the callBackUrl is an optional value, you can set it to null, empty, or not passed, if your application is not able to recieve request from BlueVia. Typically websites set a callBackURL and desktop or mobile applications don't. Both requestToken and requestToken_secret must be saved in your application because oAuth process will require it later. </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Configuration.Client.setTokenPair(getRequest.Token,getRequest.TokenSecret);
        or
        Bluevia.Core.BlueviaConsumer.TokenManager.StoreNewRequestToken(getRequest);
</pre></div><p>  <br/>
</p>
<p><b>Second Step:</b> <br/>
<br/>
 As explained in: <a href="https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth</a> there are two ways to receive the verification code: To get user authorization using the oauth_token from your request token (only for "OutOfBand" and "WebOauth" modes), you have to take the user to BlueVia Connect including your oauth_token as a request parameter. The "AuthoriseUrl" field from the "first step response", will contain the url where redirect the user. </p>
<ul>
<li>
<p class="startli">OutOfBand authorization:</p>
<p class="endli">Callback parameter is "oob" or it's not defined (as shown below). You have to ask the user to enter the PIN code (oauth_verifier) in your app. Note that your users will need to copy and paste the PIN code manually, so be clear when you request it to be sure they do not get confused. </p>
<div class="fragment"><pre class="fragment">                var getRequest = request
                        .OAuth.RequestToken.Get();
</pre></div>  </li>
<li>
<p class="startli">WebOauth authorization:</p>
<p class="endli">Callback parameter is a defined callback URL. You will receive the oauth_verifier as a request parameter at your callback. </p>
<div class="fragment"><pre class="fragment">                var getRequest = request
                        .OAuth.RequestToken.Get(callbackUrl:<span class="stringliteral">&quot;callbackUrl&quot;</span>);
</pre></div>  </li>
<li>
<p class="startli">SMSOauth authorization:</p>
<p class="endli">Finally Bluevia supports a variation of OAuth process where the user is not using the browser to authorize the application. Instead he will receive an SMS containing he PIN code (oauth_verifier). To use this SMS handshake, getRequestToken request must pass the user's MSISDN (phone number) in callback parameter. After the user had received the PIN code, the application should allow him to enter it and request the access token. </p>
<div class="fragment"><pre class="fragment">                var getRequest = request
                        .OAuth.RequestToken.Get(callbackUrl:<span class="stringliteral">&quot;your_MSISDN&quot;</span>);
</pre></div>  </li>
</ul>
<p><b>Third Step:</b> <br/>
<br/>
 With the obtained PIN code (oauth_verifier), you can now get the accessToken from the user as follows: </p>
<div class="fragment"><pre class="fragment">        var access = authenticatedRequest
        .OAuth.AccessToken.Get(getRequest, <span class="stringliteral">&quot;Verification_Code&quot;</span>);
</pre></div><p>And you should store it into the session by the following methods: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Configuration.Client.setTokenPair(access.Token,access.TokenSecret);
        or
        Bluevia.Core.BlueviaConsumer.TokenManager.StoreNewRequestToken(access);
</pre></div> <p><b>Guides:</b> </p>
<ul>
<li>
<a class="el" href="blv_using_bluevia.html">Using Bluevia</a> </li>
<li>
<a class="el" href="blv_common.html">Common</a> </li>
<li>
<a class="el" href="blv_api_oauth.html">Oauth</a> </li>
<li>
<a class="el" href="blv_api_advertising.html">Advertising</a> </li>
<li>
<a class="el" href="blv_api_directory.html">Directory</a> </li>
<li>
<a class="el" href="blv_api_location.html">Location</a> </li>
<li>
<a class="el" href="blv_api_mms.html">MMS</a> </li>
<li>
<a class="el" href="blv_api_payment.html">Payment</a> </li>
<li>
<a class="el" href="blv_api_sms.html">SMS</a> </li>
<li>
<a class="el" href="blv_getting_started.html">Getting Started Guide</a> </li>
<li>
<a class="el" href="blv_demos.html">DEMOs guide</a> </li>
</ul>
<p><br/>
  </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Mon Jan 23 2012 08:36:16 for Bluevia by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
