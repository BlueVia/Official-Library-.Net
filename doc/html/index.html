<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bluevia: Developer Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bluevia&#160;<span id="projectnumber">1.3</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Developer Guide </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="developer_guide_abstract_sec"></a>
Abstract</h2>
<h2><a class="anchor" id="introduction"></a>
Introduction</h2>
<p>Bluevia’s .NET SDK” allows you to use the BlueVia’s public API from your .NET application using just a few lines of code. You only need to download the SDK, reference the BlueVia libraries into your solution, create API keys for it, and use all the BlueVia's functionality in an easy way.</p>
<p>BlueVia offers you: </p>
<ul>
<li>
SMS and MMS sending, receiving and monitoring. </li>
<li>
Advertise requesting. </li>
<li>
User's related info receiving. </li>
</ul>
<p><br/>
 More info: </p>
<ul>
</ul>
<p><a href="https://bluevia.com/en/knowledge/APIs">https://bluevia.com/en/knowledge/APIs</a><br/>
  </p>
<p><b>This SDK contains:</b></p>
<ul>
<li>
doc\ <ul>
<li>
html\ </li>
</ul>
</li>
<li>
lib\ <ul>
<li>
Bluevia.dll </li>
<li>
DotNetOpenAuth.dll </li>
</ul>
</li>
<li>
src\ <ul>
<li>
libraries\ </li>
<li>
Telefonica\ </li>
<li>
<a class="el" href="namespace_example.html">Example</a>\ </li>
<li>
Bluevia.sln </li>
</ul>
</li>
<li>
LICENSE.txt </li>
</ul>
<h3><a class="anchor" id="sdk_overview_sec"></a>
SDK Overview:</h3>
<p>Supported Operating Systems:</p>
<ul>
<li>
Windows XP (32-bit or 64-bit). </li>
<li>
Windows Vista (32-bit or 64-bit). </li>
<li>
Windows 7 (32-bit or 64-bit). </li>
</ul>
<h3><a class="anchor" id="enviroment_needed_sec"></a>
Environment needed:</h3>
<ul>
<li>
.NET Framework 4 </li>
<li>
Microsoft Visual Studio 2010 </li>
</ul>
<h3><a class="anchor" id="using_bluevia"></a>
Using Bluevia is easy:</h3>
<p>First: Configure your data. </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Configuration.Client.setConsumer(<span class="stringliteral">&quot;Your_consumer_key&quot;</span>);
        Bluevia.Core.Configuration.Client.setConsumerSecret(<span class="stringliteral">&quot;Your_consumer_secret&quot;</span>); 
</pre></div>  <p>Second: Create a Bluevia Client. </p>
<div class="fragment"><pre class="fragment">        BlueviaClient client = <span class="keyword">new</span> BlueviaClient(); 
</pre></div>  <p>Third: Create a Request over the Client. </p>
<div class="fragment"><pre class="fragment">        IBlueviaClient request = client.CreateRequest(); 
</pre></div>  <p>Fourth: Authenticate if necessary. </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Configuration.Client.setTokenPair(<span class="stringliteral">&quot;AccessToken&quot;</span>, <span class="stringliteral">&quot;SecretToken&quot;</span>);
        IBlueviaClient authenticatedRequest = request.AuthenticateClient();
</pre></div><p>Deprecated Method: </p>
<div class="fragment"><pre class="fragment">        IBlueviaClient authenticatedRequest = request.AuthenticateWith(<span class="stringliteral">&quot;Your_Access_Token&quot;</span>);
</pre></div>  <p>Fifth: Make the desired petition. Note that the 2 legged Oauth petition don’t need an authenticated request. And will work, only if the application has been registered for this purpose. So an App could only be registered for 2legged or 3legged functionality exclusively.</p>
<ul>
<li>
2LeggedOauth mode: <div class="fragment"><pre class="fragment">                <span class="keywordflow">try</span>
                {
                      var response = request.API.Primitive.Send(Data);
                }
                <span class="keywordflow">catch</span> (Exception e) { } 
</pre></div> </li>
<li>
3LeggedOauth mode: <div class="fragment"><pre class="fragment">                <span class="keywordflow">try</span>
                {
                      var response = authenticatedRequest.API.Primitive.Send(Data);
                }
                <span class="keywordflow">catch</span> (Exception e) { } 
</pre></div> </li>
</ul>
<p><b>Endpoints:</b> BlueVia has two endpoints, commercial and sandbox. Commercial is linked to Telefonica network, and sandbox is used just to verify application behavior (read the COMMON area to learn how to change it). </p>
<h3><a class="anchor" id="oauth_sec"></a>
OAuth:</h3>
<p>User authentication is launched using OAuth protocol, so user is not required to use credentials in third party applications. If you want to learn more about OAuth please check: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth.</a> </p>
<p><a href="http://oauth.net" target="_blank">http://oauth.net</a>  </p>
<p>We retrieve two parameters, Token and Token_Secret that will be used during the OAuth process. Both token and token_secret must be saved by the application provider cause OAuth process will require it later in almost every petition to the endpoints.</p>
<p>Once the user is authenticated and has authorized the application in BlueVia portal, he should be redirected to the URL used as parameter. Now it's time to fetch the valid token and token secret that shall identify the new user during any call to BlueVia API.</p>
<h3><a class="anchor" id="using_the_api_sec"></a>
Using the API´s:</h3>
<p>Most of requests when accessing Bluevia API are associated to a specific user, so when a BlueviaClient object is created both user token and user token secret must be provided to identify user on behalf of whom the application wants to access BlueVia APIs. NOTE: From here, fields marked with "*" constructing objects or calling methods, means that are optional parameters.</p>
<p><br/>
 </p>
<h2><a class="anchor" id="common_sec"></a>
COMMON:</h2>
<p><b>Objects:</b> OAuth Token pair: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Schemas.OAuthToken OAuthToken = <span class="keyword">new</span> Bluevia.Core.Schemas.OAuthToken(<span class="stringliteral">&quot;accessToken&quot;</span>,<span class="stringliteral">&quot;accessTokenSecret&quot;</span>);
</pre></div><p> <br/>
</p>
<p><b>Methods:</b> Storing the AccessToken, and the AccessTokenSecret: </p>
<ul>
<li>
First mode: <div class="fragment"><pre class="fragment">                Bluevia.Core.BlueviaConsumer.TokenManager.StoreNewRequestToken(<span class="stringliteral">&quot;accessToken&quot;</span>,<span class="stringliteral">&quot;accessTokenSecret&quot;</span>);
</pre></div> </li>
<li>
Second mode: <div class="fragment"><pre class="fragment">                Bluevia.Core.BlueviaConsumer.TokenManager.StoreNewRequestToken(OAuthToken);
</pre></div> </li>
<li>
Third mode: <div class="fragment"><pre class="fragment">                Bluevia.Core.Configuration.Client.setTokenPair(<span class="stringliteral">&quot;AccessToken&quot;</span>, <span class="stringliteral">&quot;SecretToken&quot;</span>);
</pre></div> </li>
</ul>
<p><br/>
Setting environmental data: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Configuration.Client.setTokenPair(<span class="stringliteral">&quot;AccessToken&quot;</span>, <span class="stringliteral">&quot;SecretToken&quot;</span>);
        Bluevia.Core.Configuration.Client.setConsumer(<span class="stringliteral">&quot;Your_consumer_key&quot;</span>);
        Bluevia.Core.Configuration.Client.setConsumerSecret(<span class="stringliteral">&quot;Your_consumer_secret&quot;</span>);
        Bluevia.Core.Configuration.Client.setTimeout(<span class="keywordtype">int</span>);
        <span class="comment">//Sandbox mode</span>
        Bluevia.Core.Configuration.Client.setSandbox(<span class="keyword">true</span>);
        Bluevia.Core.Configuration.Client.setEnvironment(<span class="stringliteral">&quot;_Sandbox&quot;</span>);
        <span class="comment">//Commercial mode</span>
        Bluevia.Core.Configuration.Client.setSandbox(<span class="keyword">false</span>);
        Bluevia.Core.Configuration.Client.setEnvironment(<span class="stringliteral">&quot;&quot;</span>); 
</pre></div>  <p><br/>
 </p>
<h2><a class="anchor" id="oauth_sec"></a>
OAuth:</h2>
<p><b>Objects:</b> Create OAuth Token pair: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Schemas.OAuthToken OAuthToken = <span class="keyword">new</span> Bluevia.Core.Schemas.OAuthToken(<span class="stringliteral">&quot;accessToken&quot;</span>,<span class="stringliteral">&quot;accessTokenSecret&quot;</span>);
</pre></div><p><b>Methods:</b> Requesting valid tokens for the application:</p>
<p>First Step: </p>
<div class="fragment"><pre class="fragment">        var request = request
        .OAuth.RequestToken.Get(callbackUrl: <span class="stringliteral">&quot;callbackUrl&quot;</span>*);
</pre></div> <p>Second Step: As explained in: <a href="https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.OAuth</a> there are two ways to receive the verification code: </p>
<ul>
<li>
If you want to receive the verification code by SMS, you must make the First Step with your MSISDN at the callback parameter. </li>
<li>
If you prefer to receive the code by http from Bluevia server, the First Step must be done with a callback parameter. And at the end of "connect.bluevia" process, you will be redirected to: <a href="http://localhost/?oauth_verifier=Verification_Code&amp;oauth_token=" target="_blank">http://localhost/?oauth_verifier=Verification_Code&amp;oauth_token=</a>your_given_requested_token. </li>
</ul>
<p>The "connect.bluevia" process must be done after making the First Step by login into <a href="https://connect.bluevia.com/authorise" target="_blank">https://connect.bluevia.com/authorise</a>, and then, go to <a href="https://connect.bluevia.com/authorise?oauth_token=" target="_blank">https://connect.bluevia.com/authorise?oauth_token=</a>your_given_requested_token. Accept all the terms, and finally press: Return BlueVia App.  </p>
<p>Third Step: </p>
<div class="fragment"><pre class="fragment">        var access = request
        .OAuth.AccessToken.Get(request, <span class="stringliteral">&quot;Verification_Code&quot;</span>);
</pre></div> <p><br/>
 </p>
<h2><a class="anchor" id="advertising_sec"></a>
ADVERTISING:</h2>
<p>The Bluevia Advertising API is a set of functions which allows users to provide advertising based on different advertisement types such as images or texts or similar elements within their applications. More Info: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.Advertising" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.Advertising</a> </p>
<p><b>Objects:</b> Creating a request object: </p>
<div class="fragment"><pre class="fragment">        Bluevia.SGAP.SimpleAdRequest adRequest = <span class="keyword">new</span> SimpleAdRequest
        (adRequestId, adSpace, userAgent, protectionPolicy, adRequestId*,targetUserId*,<span class="stringliteral">&quot;country&quot;</span>*, adPresentationSize*);
</pre></div> <p><b>Methods:</b> Requesting an advertising: </p>
<ul>
<li>
2LeggedOauth mode: <div class="fragment"><pre class="fragment">        var response = request
        .SGAP.AdRequest.Send(adRequest,<span class="keyword">true</span>);
</pre></div> </li>
<li>
3LeggedOauth mode: <div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .SGAP.AdRequest.Send(adRequest,<span class="keyword">false</span>);
</pre></div> </li>
</ul>
<p><br/>
 </p>
<h2><a class="anchor" id="directory_sec"></a>
DIRECTORY:</h2>
<p>The Bluevia Directory API is a set of functions which allows users to retrieve user-related information, divided in three blocks (user profile, access information and user terminal information). More Info: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.GetUserInformation" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.GetUserInformation</a> </p>
<p><b>Methods:</b> </p>
<ul>
<li>
Getting user profile: <ul>
<li>
First mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .Directory.ProfileInfo.Get();
</pre></div> </li>
<li>
Second mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .Directory.ProfileInfo.Get(Directory.Schemas.ProfileFields.field | Directory.Schemas.ProfileFields.field …);
</pre></div> </li>
</ul>
</li>
<li>
Getting user access info: <ul>
<li>
First mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .Directory.AccessInfo.Get();
</pre></div> </li>
<li>
Second mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .Directory.AccessInfo.Get(Directory.Schemas.AccessInfoFields.field);
</pre></div> </li>
</ul>
</li>
<li>
Getting user terminal info: <ul>
<li>
First mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .Directory.TerminalInfo.Get();
</pre></div> </li>
<li>
Second mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .Directory.TerminalInfo.Get(Directory.Schemas.TerminalInfoFields.field |Directory.Schemas.TerminalInfoFields.field);
</pre></div> </li>
</ul>
</li>
</ul>
<p><br/>
 </p>
<h2><a class="anchor" id="location_sec"></a>
LOCATION:</h2>
<p>The Bluevia Location API provides access not just to the geographical coordinates of a terminal where Location is expressed through a latitude, longitude, and accuracy. The operations cover the requesting for the location of a terminal or a group of terminals. More Info: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.Location" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.Location</a> </p>
<p><b>Objects:</b> </p>
<ul>
<li>
Creating a TerminalLocationRequestParams object: <div class="fragment"><pre class="fragment">        Bluevia.Location.Schemas.TerminalLocationParams tlp = <span class="keyword">new</span> TerminalLocationParams();
        tlp.AcceptableAccuracy = “Acceptable Accuracy”;*
</pre></div> </li>
</ul>
<p><b>Methods:</b> </p>
<ul>
<li>
Getting Location Info: <div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .Location.TerminalLocation.GetLocation(tlp);
</pre></div> </li>
</ul>
<p><br/>
 </p>
<h2><a class="anchor" id="mms_Sec"></a>
MMS:</h2>
<p>The Bluevia MMS API is a set of functions which allows users to send and receive MMS messages and request the status of those previously sent messages. Also you can subscribe notifications to your own server. In must be considered that the available Content-Types, MMS can carry are (as named in MMS/Schemas/MMSContentTypes.cs): </p>
<p><em> text/plain. image/jpeg, image/bmp, image/gif, image/png. audio/amr, audio/midi, audio/mp3, audio/mpeg, audio/wav. video/mp4, video/avi, video/3gpp. </em> 300KB as much, for good performance. More Info: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.MMS" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.MMS</a> </p>
<p><b>Objects:</b> </p>
<ul>
<li>
<p class="startli">Creating a message object: </p>
<div class="fragment"><pre class="fragment">        Bluevia.MMS.Schemas.MessageType message = <span class="keyword">new</span> Bluevia.MMS.Schemas.MessageType
        (<span class="keyword">new</span> <span class="keywordtype">string</span>[] {<span class="stringliteral">&quot;Destination 1&quot;</span>,<span class="stringliteral">&quot;Destination 2&quot;</span>...    },<span class="stringliteral">&quot;Message text&quot;</span>*);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Creating a FileAttachment object: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Core.Schemas.FileAttachment file = <span class="keyword">new</span> Bluevia.Core.Schemas.FileAttachment
        (<span class="stringliteral">&quot;PathToFile&quot;</span>, MMS.Schemas.MMSContentTypes.type);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Creating a StreamAttachment object: </p>
<ul>
<li>
First mode: <div class="fragment"><pre class="fragment">                Bluevia.Core.Schemas.StreamAttachment stream = <span class="keyword">new</span> Bluevia.Core.Schemas.StreamAttachment
                (byte[] data, MMS.Schemas.MMSContentTypes.type, <span class="keywordtype">string</span> fileName);
</pre></div> </li>
<li>
Second mode: &lt; <div class="fragment"><pre class="fragment">                Bluevia.Core.Schemas.StreamAttachment stream = <span class="keyword">new</span> Bluevia.Core.Schemas.StreamAttachment
                (System.IO.MemoryStream data, MMS.Schemas.MMSContentTypes.type, <span class="keywordtype">string</span> fileName);
</pre></div> </li>
</ul>
<p class="endli"></p>
</li>
<li>
Creating a MessageNotification object: <div class="fragment"><pre class="fragment">        Bluevia.MMS.Schemas.MessageNotificationType notificationObject = <span class="keyword">new</span> Bluevia.MMS.Schemas.MessageNotificationType()
        {reference = <span class="keyword">new</span> MMS.Schemas.SimpleReferenceType() {correlator,endpoint} ,destinationAddress, criteria};
</pre></div> </li>
</ul>
<p><b>Methods:</b></p>
<ul>
<li>
Sending MMS: <ul>
<li>
<p class="startli">First mode: </p>
<div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .MMS.MessageMT.Send(message, <span class="keyword">new</span> FileAttachment[] {File, File …}*);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Second mode: </p>
<div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .MMS.MessageMT.Send(message,StreamAttachment[] streamAttachments);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Third mode: </p>
<div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .MMS.MessageMT.Send(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;Address&quot;</span>, <span class="stringliteral">&quot; Address&quot;</span>...}, <span class="stringliteral">&quot; mmsSubject&quot;</span>, <span class="keyword">new</span> FileAttachment[] {File, File …}*);
</pre></div><p class="endli"></p>
</li>
</ul>
</li>
<li>
<p class="startli">Getting Status:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .MMS.MessageMT.GetStatus(<span class="stringliteral">&quot;messageId&quot;</span>,<span class="stringliteral">&quot;Status&quot;</span>*);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Retrieving MMS Id:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .MMS.MessageMO.GetMessages(<span class="stringliteral">&quot;registrationId&quot;</span>);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Getting MMS:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .MMS.MessageMO.GetMessage(<span class="stringliteral">&quot;registrationId&quot;</span>,<span class="stringliteral">&quot;messageId&quot;</span>);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Subscribe Notifications:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .MMS.NotificationManager.Subscribe(notificationObject);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Unsubscribe Notifications:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .MMS.NotificationManager.UnSubscribeNotification(<span class="stringliteral">&quot;notificationId&quot;</span>);
</pre></div><p class="endli"></p>
</li>
</ul>
<p><br/>
 </p>
<h2><a class="anchor" id="payment_Sec"></a>
PAYMENT:</h2>
<p>The Bluevia PAYMENT API is a set of functions which allows individual, atomic payments based on input purchase information with economic data.</p>
<p><b>You must consider that the Oauth Token model changes for the Payment API:<br/>
</b> Usually, you only have to request one Token Pair for your whole application. <br/>
But in the Payment case, a new special temporal Token Pair must be requested for each "payment request". And will be only usefull for that payment request and its relatives operations, "cancel authorization request", "get status request"... <br/>
I.E.: If you want to make a payment: First of all you must request a new pair of RequestTokens in the "payment way". After that you have to retrieve the AccessTokens as always. <br/>
Next Step is to store that AccessTokens, and once stored, you can cancel it (with cancelAuthorization method), or make the payment. <br/>
If you finally decide to make the payment(with payment method), you can get the status or request notifications (if the country permits asinchronus payments), with the same Tokens. But, if you want to make another payment, you have to request a new pair of tokens for it.  More Info: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.Payment" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.Payment</a> </p>
<p><b>Objects:</b> </p>
<ul>
<li>
<p class="startli">Creating a ServiceInfo object: This object must be included in the RequestToken (payment's for) requets. </p>
<div class="fragment"><pre class="fragment">        Bluevia.OAuth.Schemas.ServiceInfo serviceInfo = Bluevia.OAuth.Schemas.ServiceInfo();
        serviceInfo.name = name;<span class="comment">//of the service</span>
        paymentInfo.serviceID = string;
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Creating a PaymentInfoType object: This object must be included in the RequestToken (payment's for) requets, and in the PaymentParamsType object for the payment request. </p>
<div class="fragment"><pre class="fragment">        Bluevia.Payment.Schemas.PaymentInfoType paymentInfo = Bluevia.Payment.Schemas.PaymentInfoType();
        paymentInfo.amount = int;<span class="comment">//the last digits will be the currency cents</span>
        paymentInfo.currency = string;<span class="comment">//&quot;EUR&quot;,&quot;GBP&quot;,...</span>
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Creating a PaymentParamsType object: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Payment.Schemas.PaymentParamsType paymentParams = Bluevia.Payment.Schemas.PaymentParamsType();
        paymentParams.paymentInfo = paymentInfo;
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Creating a GetPaymentStatusParamsType object: </p>
<div class="fragment"><pre class="fragment">        Bluevia.Payment.Schemas.GetPaymentStatusParamsType paymentStatusParams = Bluevia.Payment.Schemas.GetPaymentStatusParamsType();
        paymentStatusParams.transactionId = string;
</pre></div><p class="endli"></p>
</li>
</ul>
<p><b>Methods:</b></p>
<ul>
<li>
<p class="startli">Requesting RequestTokens for payment use:</p>
<div class="fragment"><pre class="fragment">    var response = request 
    .OAuth.RequestToken.Get(paymentInfo, serviceInfo, <span class="stringliteral">&quot;callbackUrl&quot;</span>*);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Payment:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .Payment.AmountCharging.Payment(paymentParams);
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Cancel Authorization tokens:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .Payment.AmountCharging.CancelAuthorization();
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Getting the payment status:</p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .Payment.AmountCharging.GetPaymentStatus(paymentStatusParams );
</pre></div><p class="endli"></p>
</li>
</ul>
<p><br/>
 </p>
<h2><a class="anchor" id="sms_sec"></a>
SMS:</h2>
<p>The Bluevia SMS API is a set of functions which allows users to send and receive SMS messages and request the status of those previously sent messages. Also you can subscribe notifications to your own server. More Info: </p>
<p><a href="https://bluevia.com/en/knowledge/APIs.API-Guides.SMS" target="_blank">https://bluevia.com/en/knowledge/APIs.API-Guides.SMS</a> </p>
<p><b>Objects:</b></p>
<ul>
<li>
<p class="startli">Creating a message object: </p>
<div class="fragment"><pre class="fragment">        Bluevia.SMS.Schemas.SMSTextType message = <span class="keyword">new</span> Bluevia.MMS.Schemas.MessageType
        (<span class="keyword">new</span> <span class="keywordtype">string</span>[] {<span class="stringliteral">&quot;Destination 1&quot;</span>, <span class="stringliteral">&quot;Destination 2&quot;</span>...},<span class="stringliteral">&quot;Message text&quot;</span>*);
</pre></div><p class="endli"></p>
</li>
<li>
Creating a MessageNotification object: <div class="fragment"><pre class="fragment">        Bluevia.SMS.Schemas.SMSNotificationType notification = <span class="keyword">new</span> SMS.Schemas.SMSNotificationType()
        {reference = <span class="keyword">new</span> SMS.Schemas.SimpleReferenceType(){correlator, endpoint}, destinationAddress, criteria};
</pre></div> </li>
</ul>
<p><b>Methods:</b></p>
<ul>
<li>
Sending SMS: <ul>
<li>
First mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .SMS.MessageMT.Send(<span class="keyword">new</span> <span class="keywordtype">string</span>[] {<span class="stringliteral">&quot;Destination 1&quot;</span>,<span class="stringliteral">&quot;Destination 2&quot;</span>...    },<span class="stringliteral">&quot;Message text&quot;</span>);
</pre></div> </li>
<li>
Second mode: <div class="fragment"><pre class="fragment">                var response = authenticatedRequest
                .SMS.MessageMT.Send(message);
</pre></div> </li>
</ul>
</li>
<li>
Getting Status: <div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .SMS.MessageMT.GetStatus(<span class="stringliteral">&quot;messageId&quot;</span>, <span class="stringliteral">&quot;status&quot;</span>*);
</pre></div> </li>
<li>
Getting SMS: <div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .SMS.MessageMO.GetMessages(<span class="stringliteral">&quot;registrarionId&quot;</span>);
</pre></div> </li>
<li>
Subscribe Notifications: <div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .SMS.NotificationManager.Subscribe(notification);
</pre></div> </li>
<li>
<p class="startli">Unsubscribe Notifications: </p>
<div class="fragment"><pre class="fragment">        var response = authenticatedRequest
        .SMS.NotificationManager.UnSubscribeNotification(<span class="stringliteral">&quot;notificationId&quot;</span>);
</pre></div><p class="endli"></p>
</li>
</ul>
<h3><a class="anchor" id="getting_started_sec"></a>
Getting Started:</h3>
<p>The following started guide explain the behavior of each Bluevia API, including code samples to start developing a simple application in an easy way:</p>
<ul>
<li>
<a class="el" href="blv_getting_started.html">Getting Started Guide</a> </li>
</ul>
<p><br/>
 </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Fri Nov 18 2011 11:32:08 for Bluevia by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
